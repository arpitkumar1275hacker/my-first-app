{% include 'headerr.html' %}
{% block content %}

<style>
/* ===== PAGE WRAPPER ===== */
.slider-page{
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    background:linear-gradient(135deg,#eef2ff,#f8fafc);
    padding:40px 15px;
}

/* ===== MAIN CONTAINER ===== */
.slider-container{
    width:100%;
    max-width:1100px;
}

/* ===== FORM CARD ===== */
.slider-box{
    width:100%;
    max-width:520px;
    background:#ffffff;
    padding:35px 32px;
    border-radius:18px;
    box-shadow:0 20px 50px rgba(0,0,0,0.08);
    margin:0 auto;
}

/* ===== TITLE ===== */
.slider-box h2{
    font-size:24px;
    font-weight:700;
    color:#111827;
    margin-bottom:25px;
    text-align:center;
    letter-spacing:0.3px;
}

/* ===== FILE UPLOAD ===== */
.file-upload{
    border:2px dashed #d1d5db;
    border-radius:14px;
    padding:35px 25px;
    text-align:center;
    cursor:pointer;
    transition:0.3s;
    position:relative;
    background:#fafafa;
}

.file-upload:hover{
    border-color:#4f46e5;
    background:#f5f7ff;
}

.file-upload input{
    position:absolute;
    inset:0;
    opacity:0;
    cursor:pointer;
}

.file-upload .upload-text{
    font-size:15px;
    color:#6b7280;
    font-weight:600;
    line-height:1.6;
}

/* ===== PREVIEW ===== */
.preview{
    margin-top:18px;
    text-align:center;
}

.preview img{
    display:none;
    max-width:100%;
    height:220px;
    object-fit:cover;
    border-radius:14px;
    box-shadow:0 10px 25px rgba(0,0,0,0.15);
}

/* ===== BUTTON ===== */
.submit-btn{
    margin-top:25px;
    width:100%;
    padding:15px;
    border:none;
    border-radius:14px;
    background:linear-gradient(135deg,#4f46e5,#6366f1);
    color:white;
    font-size:16px;
    font-weight:700;
    cursor:pointer;
    transition:0.3s;
}

.submit-btn:hover{
    transform:translateY(-2px);
    box-shadow:0 15px 35px rgba(79,70,229,0.35);
}

/* ===== SLIDER LIST SECTION ===== */
.slider-list{
    margin-top:60px;
    text-align:center;
}

/* ===== TITLE ===== */
.list-title{
    font-size:22px;
    font-weight:700;
    color:#111827;
    margin-bottom:25px;
}

/* ===== GRID ===== */
.slider-grid{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
    gap:22px;
}

/* ===== SLIDER CARD ===== */
.slider-item{
    background:#ffffff;
    border-radius:16px;
    padding:12px;
    box-shadow:0 10px 30px rgba(0,0,0,0.08);
    transition:0.3s;
}

.slider-item:hover{
    transform:translateY(-6px);
    box-shadow:0 18px 45px rgba(0,0,0,0.12);
}

/* ===== IMAGE ===== */
.slider-item img{
    width:100%;
    height:180px;
    object-fit:cover;
    border-radius:12px;
}

/* ===== META ===== */
.slider-meta{
    margin-top:10px;
    font-size:13px;
    color:#6b7280;
    font-weight:500;
    display:flex;
    justify-content:space-between;
}

/* ===== EMPTY ===== */
.empty-text{
    grid-column:1/-1;
    text-align:center;
    color:#9ca3af;
    font-size:15px;
    font-weight:500;
}
</style>

<div class="slider-page">
    <div class="slider-container">

        <!-- ===== FORM ===== -->
        <div class="slider-box">

            <h2>Add Slider Image</h2>

            <form method="POST" enctype="multipart/form-data">
                {% csrf_token %}

                <!-- Upload Field -->
                <div class="file-upload">
                    <input type="file" name="image" accept="image/*" required>
                    <div class="upload-text">
                        Click to upload slider image<br>
                        <small>(PNG, JPG, JPEG)</small>
                    </div>
                </div>
<div style="margin-bottom:18px;">
    <input type="text"
           name="link_name"
           placeholder="Enter Slider Link Name (optional)"
           style="
               width:100%;
               padding:14px 16px;
               border-radius:12px;
               border:1px solid #d1d5db;
               font-size:15px;
               font-weight:600;
           ">
</div>
                <!-- Preview -->
                <div class="preview">
                    <img id="previewImage">
                </div>

                <!-- Submit Button -->
                <button type="submit" class="submit-btn">
                    Save Slider Image
                </button>

            </form>

        </div>

        <!-- ===== SLIDER LIST ===== -->
        <div class="slider-list">

            <div class="list-title">Uploaded Slider Images</div>

            <div class="slider-grid">

                {% for s in sliders %}
                    <div class="slider-item">
                        <img src="{{ s.image.url }}" alt="Slider Image">
                        <div class="slider-meta">
                            <span>ID: {{ s.id }}</span>
                            <span>{{ s.created_at|date:"d M Y" }}</span>
                        </div>
                         <!-- DELETE BUTTON -->
    <form method="POST" action="{% url 'company:delete_slider' s.id %}" class="delete-form">
        {% csrf_token %}
        <button type="submit" class="delete-btn"
                onclick="return confirm('Are you sure you want to delete this image?')">
            Delete
        </button>
    </form>
                    </div>
                {% empty %}
                    <div class="empty-text">
                        No slider images uploaded yet.
                    </div>
                {% endfor %}

            </div>
        </div>

    </div>
</div>

<script>
const input = document.querySelector('input[type="file"]');
const preview = document.getElementById('previewImage');

input.addEventListener('change', function(){
    const file = this.files[0];
    if(file){
        const reader = new FileReader();
        reader.onload = function(){
            preview.src = reader.result;
            preview.style.display = "block";
        }
        reader.readAsDataURL(file);
    }
});
</script>

{% endblock %}
