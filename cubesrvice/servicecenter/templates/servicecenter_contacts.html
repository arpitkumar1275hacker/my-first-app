{% include 'serviceheader.html' %}

<style>
body{
    background:#f4f6f8;
    font-family:'Segoe UI', sans-serif;
}
.content{
    margin-left:260px;
    
}
/* PAGE CARD */
.page-card{
    background:#fff;
    margin:30px;
    padding:25px;
    border-radius:16px;
    box-shadow:0 10px 30px rgba(0,0,0,0.08);
}

/* TITLE */
.page-card h2{
    margin-bottom:20px;
    display:flex;
    align-items:center;
    gap:10px;
    font-weight:600;
}

/* TABLE */
.table-wrapper{
    overflow-x:auto;
}

table{
    width:100%;
    border-collapse:collapse;
    min-width:800px;
}

thead{
    background:#111827;
    color:#fff;
}

th, td{
    padding:14px 16px;
    text-align:left;
    font-size:14px;
}

tbody tr{
    border-bottom:1px solid #e5e7eb;
}

tbody tr:hover{
    background:#f9fafb;
}

/* BADGE */
.badge{
    background:#eef2ff;
    color:#3730a3;
    padding:5px 10px;
    border-radius:20px;
    font-size:12px;
}

/* DELETE BUTTON */
.delete-btn{
    background:#fee2e2;
    color:#991b1b;
    border:none;
    padding:8px 14px;
    border-radius:8px;
    cursor:pointer;
    transition:0.3s;
}

.delete-btn:hover{
    background:#fecaca;
}

/* EMPTY */
.empty{
    text-align:center;
    padding:30px;
    font-size:15px;
    color:#6b7280;
}

/* MOBILE VIEW */
@media(max-width:768px){
    .page-card{
        margin:15px;
        padding:15px;
    }

    h2{
        font-size:18px;
    }
}
</style>
<div class="content">
<div class="page-card">
    <h2>ðŸ“© User Complaints / Contacts</h2>

    <div class="table-wrapper">
        <table>
            <thead>
                <tr>
                    <th>User</th>
                    <th>Mobile</th>
                    <th>Email</th>
                    <th>Subject</th>
                    <th>Date</th>
                    <th>Action</th>
                </tr>
            </thead>

            <tbody>
            {% for c in contacts %}
                <tr>
                    <td>
                        <strong>{{ c.first_name }} {{ c.last_name }}</strong><br>
                        <span class="badge">Pincode: {{ c.pincode }}</span>
                    </td>
                    <td>{{ c.mobile }}</td>
                    <td>{{ c.email }}</td>
                    <td>{{ c.subject|default:"â€”" }}</td>
                    <td>{{ c.created_at|date:"d M Y" }}</td>
                    <td>
                        <form method="POST">
                            {% csrf_token %}
                            <input type="hidden" name="delete_id" value="{{ c.id }}">
                            <button class="delete-btn"
                                onclick="return confirm('Are you sure you want to delete this contact?')">
                                ðŸ—‘ Delete
                            </button>
                        </form>
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="6" class="empty">
                        No contacts found for your pincode
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
</div>